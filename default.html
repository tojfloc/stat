<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link
      rel="stylesheet"
      href="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css"
    />
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>

    <script type="application/javascript">
      var lastBtnClickId = null;
      var counter = new Object();
      var lastclick = null;

      $(document).ready(function () {
        var color = "Firebrick";

        $(document).on("click", "#floorballdiv", function (e) {
          mouseX = e.pageX;
          mouseY = e.pageY;

          console.log("Mouse Position:\t" + mouseX + "|" + mouseY);

          var size = "15px";
          lastclick = $("<div />").css({
            backgroundColor: color,
            height: size,
            left: mouseX + "px",
            position: "absolute",
            top: mouseY + "px",
            width: size,
          });
          $(this).append(lastclick);

          lastBtnClickId = "btnShotOnTarget";

          counter[lastBtnClickId] = (counter[lastBtnClickId] || 0) + 1;

          // default counter is btnShotOnTarget
          $("#btnShotOnTarget")
            .html("Skott på mål: " + counter[lastBtnClickId])
            .button("refresh");
        });
      });

      function removeBtn() {
        if (lastclick != null && lastBtnClickId != null) {
          counter[lastBtnClickId] = (counter[lastBtnClickId] || 0) - 1;

          var btnTxt = $("#" + lastBtnClickId).data("name");

          $("#" + lastBtnClickId)
            .html(btnTxt + counter[lastBtnClickId])
            .button("refresh");

          lastclick.remove();

          lastclick = null;
          lastBtnClickId = null;
        }
      }
      function updateBtn(clicked_id) {
        if (lastBtnClickId != null && clicked_id != lastBtnClickId) {
          counter[lastBtnClickId] = (counter[lastBtnClickId] || 0) - 1;

          var btnTxt = $("#" + lastBtnClickId).data("name");

          // var newDotcolor = $("#" + lastBtnClickId).data("thecolor");
          // lastclick.css({ backgroundColor: newDotcolor });

          //lastclick.backgroundColor = $("#" + lastBtnClickId).data("theColor");

          $("#" + lastBtnClickId)
            .html(btnTxt + counter[lastBtnClickId])
            .button("refresh");

          lastBtnClickId = clicked_id;
          counter[lastBtnClickId] = (counter[lastBtnClickId] || 0) + 1;

          var btnTxt = $("#" + lastBtnClickId).data("name");

          var newDotcolor = $("#" + lastBtnClickId).data("thecolor");
          lastclick.css({ backgroundColor: newDotcolor });

          $("#" + lastBtnClickId)
            .html(btnTxt + counter[lastBtnClickId])
            .button("refresh");
        }
      }
    </script>

    <css type="text/css"></css>
  </head>
  <body>
    <center>
      <div id="floorballdiv" style="height: auto; width: auto">
        <img src="floorball.png" style="height: 700px" />
      </div>
      <div>
        <button
          data-name="Mål: "
          data-thecolor="red"
          onClick="updateBtn(this.id)"
          id="btnGoal"
          style="background-color: red"
        >
          Mål
        </button>
        <button
          data-name="Skott på mål: "
          data-thecolor="Firebrick"
          onClick="updateBtn(this.id)"
          id="btnShotOnTarget"
          style="background-color: Firebrick"
        >
          Skott på mål
        </button>
        <button
          data-name="Skott utanför: "
          data-thecolor="Teal"
          onClick="updateBtn(this.id)"
          id="btnMissed"
          style="background-color: Teal"
        >
          Skott utanför
        </button>
        <button
          data-name="Skott i täck: "
          data-thecolor="SlateBlue"
          onClick="updateBtn(this.id)"
          id="btnCovered"
          style="background-color: SlateBlue"
        >
          Skott i täck
        </button>
        <button
          data-name="Skott över: "
          data-theColor="Indigo"
          onClick="updateBtn(this.id)"
          id="btnShotOver"
          style="background-color: Indigo"
        >
          Skott över
        </button>
        <button onClick="removeBtn()" id="btnRemoveDot">
          Radera sista klick
        </button>
      </div>
    </center>
  </body>
</html>
